addons:
    postgresql: 9.6

matrix:
  include:
    - language: ruby
      cache: bundler
      rvm:
        - 2.6.3
      before_install:
        - cd ruby/
        - gem install bundler -v 2.1.4
      script:
        - bundle exec rspec

  include:
    - language: ruby
      rvm:
        - 2.6.3
      before_install:
        - cd server/
        - gem install bundler -v 2.1.4
      script:
        - bundle exec rails db:create RAILS_ENV=test
        - bundle exec rails db:migrate RAILS_ENV=test
        - bundle exec rspec

notifications:
  email:
    on_success: never
    on_failure: always
